## 如何保证页面文件能被完整送达浏览器？

- 在衡量WEB页面性能的时候有一个重要指标叫：`FP(first paint),`是指`从页面加载到首次开始绘制的时长`。影响它一个重要因素就是`网络加载速度`

1. 数据包如何送达主机？
2. 主机如何将数据包转交给应用？
3. 数据包是如何被完整地送达应用程序？

`互联网是一套理念和协议组成的体系架构`

- IP: 把数据包送达目的主机
  数据包要在互联网上进行传输，就要符合`网际协议(internet protocol,简称IP)`。
  `计算机地址就称为IP地址，访问任何网站实际上只是你的计算机向另外一套计算机请求信息`

- UDP：把数据包送达应用程序
  IP协议只负责把数据包交给对方电脑，但是电脑不知道交给那个应用程序？需要基于IP之上开发能和应用打交道的协议，最常见的是`用户数据包协议(user datagram protocol)`简称UDP.

  UDP中一个重要信息是`端口号`，端口号实际上是一个数字，诶个想访问网络的程序都系要绑定一个端口号。通过端口号UDP就能把指定的数据包发给指定的应用程序。
  所以`IP通过IP地址信息把数据包发给指定的电脑，而UDP通过端口号把数据包分发给正确的应用程序`
1. 缺点：UDP发送数据时，有各种因素导致数据包出错，虽然UDP可以校验数据是否正确，但是对于错误的数据包，UDP不提供重发机制，只是丢弃当前的包，而且UDP在发送知州也不知道是否到达目的地
`UDP不能保证数据可靠性，但是传输速度非常快`

- TCP：把数据完整的送达应用程序
UDP传输有两个问题
1. 数据包在传输过程中容易丢失
2. 大文件会被拆分很多小的数据包传输，小的数据包会经过不同的路由，并在不同的时间到达接收端，而UDP不知道如何组装这些数据包。

因此我们引入了TCP，TCP是一种面向连接的、可靠的、基于字节流的传输层通信协议。相对UDP，TCP有以下两个特点：
1. 对于数据包丢失的情况，TCP提供重传机制。
2. TCP银日了数据包排序机制，用来把乱序的数据包组合成一个完整的文件。

完整的TCP连接的生命周期包括：`建立连接、传输数据、断开连接`三个阶段。

1. 建立连接阶段。三次握手来建立客户端和服务器之间的连接。面向连接是指数据通信开始之前先做好两端之间的工作准备。三次握手是指在建立TCP连接时，客户端和服务器总共要发三个数据包以确认连接。
2. 传输数据阶段。接收端对每个数据包进行确认操作。
3. 断开连接阶段。通过四次挥手保证双方断开连接。