## Concurrent模式
- react 新功能，可以帮助保持响应，并根据用户的设备性能和网速进行适当调整。
- 阻塞vs可中断渲染
  使用版本控制为比喻
  一旦它们开始渲染一次更新，它们不能中断包括创建新的 DOM 节点和运行组件中代码在内的工作。我们称这种方法为 “阻塞渲染”。
  在 Concurrent 模式中，渲染不是阻塞的。它是可中断的。
 1. 可中断渲染
    concurrent模式通过使渲染可中断来修复此基本限制

    如果 React 可以在旧屏幕上多停留一段时间，并在展示新屏幕之前“跳过”“不够好的加载状态”，不是更好吗？
- 在 Concurrent 模式中，React 可以 同时 更新多个状态

## 渲染进程
- js
- UI渲染

互斥的，JS执行，UI渲染停下来
js霸道 

问题：js执行太长了

react: fiber requestIdleCallback
React Fiber是对核心算法的一次重新实现

React Fiber的方式
破解JavaScript中同步操作时间过长的方法其实很简单——分片。

把一个耗时长的任务分成很多小片，每一个小片的运行时间很短，虽然总时间依然很长，但是在每个小片执行完之后，都给其他任务一个执行的机会，这样唯一的线程就不会被独占，其他任务依然有运行的机会。

React Fiber把更新过程碎片化，执行过程如下面的图所示，每执行完一段更新过程，就把控制权交还给React负责任务协调的模块，看看有没有其他紧急任务要做，如果没有就继续去更新，如果有紧急任务，那就去做紧急任务。

维护每一个分片的数据结构，就是Fiber。

暂停，终止，或重新启动
时间分片

react 所有 
- 交互  (事件)
- js
- 内部setstate
- dom diff

任务优先级排名

以前：js我想执行多久执行多久
cooperative schedule:js 和 浏览器站在用户角度 互相合作
